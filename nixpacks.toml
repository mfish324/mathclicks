# Force Node.js provider, not Next.js
providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
# Only install root dependencies, ignore frontend
cmds = ["rm -rf frontend", "npm install --production=false"]

[phases.build]
# Build TypeScript backend only
cmds = ["npx tsc"]

[start]
cmd = "node dist/server.js"
